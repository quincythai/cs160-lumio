# shot-database

## Installation

1. Install [uv](https://docs.astral.sh/uv/getting-started/installation/)
2. Run `uv sync` to install dependencies and create a virutal environment in `.venv`

## Usage

Run commands prefixed with `uv run`, e.g.:

```sh
uv run python3 add_metadata.py
```

to run the metadata script.

## Dependency management

Use `uv` to [manage dependencies](https://docs.astral.sh/uv/guides/projects/#managing-dependencies), e.g.
add and remove dependencies with `uv add` and `uv remove`.

## Notes about the database

Schema:

```json
{
    "id": 0,
    "image_url": "https://m.media-amazon.com/images/M/MV5BM2IyOWE3MDAtYzYyMi00MTAxLWI1MjgtZTQ0ZDk4MGQ2OWEwXkEyXkFqcGc@._V1_.jpg",
    "movie_title": "The Green Mile",
    "year": 1999,
    "shot_size": "medium shot",
    "timestamp": "00:32:21",
    "description": "This is an interior medium-close up shot, taking place at night inside the prison's detention area known as the \"Green Mile,\" conveying a solemn, dramatic, and ominous mood. The shot centers on the character John Coffey, played by actor Michael Clarke Duncan, as he is being escorted by prison guards, including Paul Edgecomb, played by actor Tom Hanks (on the left), and another guard (on the right). Coffey, wearing tattered denim overalls and a torn shirt, is framed in the center, held firmly by the two uniformed white guards who flank him symmetrically. The shot lighting is low-key and high-contrast, primarily using bright, exposed overhead bulbs (a form of top-lighting) that illuminate the subjects' heads and shoulders while casting deep shadows and dramatically highlighting the sweat and sheen on Coffey's skin and the polished black uniforms. The overall coloring is desaturated, dominated by cool, dark tones of black, blue, and brown, a key cinematic detail that enhances the grim, institutional, and inescapable atmosphere of the scene."
}
```

- `id` is the index in the array in `metadata.json` and thus is unique.
- `images/` stores the `.jpg` files for each image. Image names are formatted `<shot_id>.jpg`.
- The `image_url`, `movie_title`, `year`, and `shot_size` are hand-labeled by a human.
    - `shot_size` was determined using [this guide](https://www.studiobinder.com/blog/types-of-camera-shots-sizes-in-film/)
- The `timestamp` is randomly generated, only to ensure that the hours are between 0-2, minutes are between 0-59, and seconds are between 0-59 (inclusive). The `add_metadata.py` script does this.
- The `description` is generated by making a call to the Gemini API in the `add_metadata.py` script using the prompt in `image_description_prompt.txt`.
